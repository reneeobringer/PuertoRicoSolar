load("~/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/2024_25/papers/RenewableEnergy/fourstates/rdatafiles/cleaneddata.RData")
View(alldata)
alldata$Year[260]
alldata[[1]]$Year[260]
View(monthlyNARRdata)
monthlyNARRdata[[1]]$Year[260]
View(stateGENdata)
stateGENdata[[1]]$Year[260]
View(monthlyNARRdata)
allData[[1]]$Year[260]
alldata[[1]]$Year[260]
View(alldata)
alldata[[1]]$Month[264]
12*21
252+5
alldata[[1]]$Year
installed.packages(fields = c ("Package", "Version"))
installed.packages()
test <- installed.packages()
View(test)
# libraries
library(stringr)           # for working with strings
library(readxl)            # for reading in excel files
library(tidyverse)         # for data organization
library(randomForest)      # random forest algorithm
library(ggplot2)           # for general plotting
library(sf)                # for plotting maps with ggplot
library(lubridate)         # for working with dates
library(humidity)          # for calculating humidity
# directories
datadir1 <- '/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/data/solarpower'
datadir2 <- '/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/data/daynet_1kmweather/PuertoRico'
rdatadir <- '/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/2024_25/papers/PRsolarpower/rdatafiles'
outputdir <- '/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/2024_25/papers/PRsolarpower/results'
figuredir <- '/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/2024_25/papers/PRsolarpower/figures'
setwd(rdatadir)
load('modelresults.rdata')
# calculate deviations
alldeviations <- list()
for (i in 1:3) {
# extract actual and predicted data
predicted <- panelyhat[[i]]
actual <- paneltest[[i]]
deviation <- list()
# calculate deviation for each municipality
for (j in 1:76) {
deviation[[j]] <- predicted[[j]] - actual[[j]]
}
alldeviations[[i]] <- deviation
}
alldeviations2 <- data.frame('CdTe_min' = sapply(alldeviations[[1]], min), 'CdTe_mean' = sapply(alldeviations[[1]], mean), 'CdTe_max' = sapply(alldeviations[[1]], max),
'CIS_min' = sapply(alldeviations[[2]], min), 'CIS_mean' = sapply(alldeviations[[2]], mean), 'CIS_max' = sapply(alldeviations[[2]], max),
'crystSI_min' = sapply(alldeviations[[3]], min), 'crystSI_mean' = sapply(alldeviations[[3]], mean), 'crystSI_max' = sapply(alldeviations[[3]], max),
'Region' = latlon$region, 'Municipality' = latlon$name)
# organize data
latlon <- read_excel('/Users/rqo5125/Library/Mobile Documents/com~apple~CloudDocs/Documents/Research/2024_25/papers/PRsolarpower/location_coordinates_allmunicipalties.xlsx')
alldeviations2 <- data.frame('CdTe_min' = sapply(alldeviations[[1]], min), 'CdTe_mean' = sapply(alldeviations[[1]], mean), 'CdTe_max' = sapply(alldeviations[[1]], max),
'CIS_min' = sapply(alldeviations[[2]], min), 'CIS_mean' = sapply(alldeviations[[2]], mean), 'CIS_max' = sapply(alldeviations[[2]], max),
'crystSI_min' = sapply(alldeviations[[3]], min), 'crystSI_mean' = sapply(alldeviations[[3]], mean), 'crystSI_max' = sapply(alldeviations[[3]], max),
'Region' = latlon$region, 'Municipality' = latlon$name)
regiondeviations <- aggregate(alldeviations2[,1:9], list(alldeviations2$Region), FUN = mean)
panelydeviations <- colMeans(alldeviations2[,1:9])
panelydeviations
alldeviations2
regiondeviations
panelydeviations
colSums(alldeviations2[,1:9])
